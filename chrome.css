@-moz-document url-prefix("chrome:") {

/* --- Staggered Menu Reveal Animation (toggleable) --- */
@media (-moz-bool-pref: "zen-menu-reveal-custom-icon.enable-animation") {
  #appMenu-popup:not([panelopen]) .subviewbutton,
  #PanelUI-popup:not([panelopen]) .subviewbutton,
  #appMenu-popup:not([panelopen]) .panel-menuitem,
  #PanelUI-popup:not([panelopen]) .panel-menuitem {
    opacity: 0 !important;
    pointer-events: none !important;
  }
  #appMenu-popup[panelopen] .subviewbutton,
  #PanelUI-popup[panelopen] .subviewbutton,
  #appMenu-popup[panelopen] .panel-menuitem,
  #PanelUI-popup[panelopen] .panel-menuitem {
    animation: menuitem-reveal-down 0.15s both;
    pointer-events: auto !important;
  }
  /* Staggered delays for 48 items, 10ms per item */
  #appMenu-popup[panelopen] .subviewbutton:nth-child(1),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(1),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(1),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(1) { animation-delay: 0ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(2),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(2),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(2),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(2) { animation-delay: 10ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(3),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(3),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(3),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(3) { animation-delay: 20ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(4),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(4),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(4),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(4) { animation-delay: 30ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(5),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(5),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(5),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(5) { animation-delay: 40ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(6),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(6),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(6),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(6) { animation-delay: 50ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(7),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(7),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(7),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(7) { animation-delay: 60ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(8),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(8),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(8),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(8) { animation-delay: 70ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(9),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(9),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(9),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(9) { animation-delay: 80ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(10),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(10),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(10),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(10) { animation-delay: 90ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(11),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(11),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(11),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(11) { animation-delay: 100ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(12),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(12),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(12),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(12) { animation-delay: 110ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(13),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(13),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(13),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(13) { animation-delay: 120ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(14),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(14),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(14),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(14) { animation-delay: 130ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(15),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(15),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(15),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(15) { animation-delay: 140ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(16),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(16),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(16),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(16) { animation-delay: 150ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(17),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(17),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(17),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(17) { animation-delay: 160ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(18),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(18),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(18),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(18) { animation-delay: 170ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(19),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(19),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(19),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(19) { animation-delay: 180ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(20),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(20),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(20),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(20) { animation-delay: 190ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(21),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(21),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(21),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(21) { animation-delay: 200ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(22),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(22),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(22),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(22) { animation-delay: 210ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(23),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(23),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(23),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(23) { animation-delay: 220ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(24),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(24),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(24),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(24) { animation-delay: 230ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(25),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(25),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(25),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(25) { animation-delay: 240ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(26),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(26),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(26),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(26) { animation-delay: 250ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(27),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(27),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(27),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(27) { animation-delay: 260ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(28),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(28),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(28),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(28) { animation-delay: 270ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(29),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(29),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(29),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(29) { animation-delay: 280ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(30),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(30),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(30),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(30) { animation-delay: 290ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(31),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(31),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(31),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(31) { animation-delay: 300ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(32),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(32),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(32),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(32) { animation-delay: 310ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(33),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(33),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(33),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(33) { animation-delay: 320ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(34),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(34),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(34),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(34) { animation-delay: 330ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(35),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(35),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(35),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(35) { animation-delay: 340ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(36),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(36),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(36),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(36) { animation-delay: 350ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(37),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(37),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(37),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(37) { animation-delay: 360ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(38),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(38),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(38),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(38) { animation-delay: 370ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(39),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(39),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(39),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(39) { animation-delay: 380ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(40),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(40),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(40),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(40) { animation-delay: 390ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(41),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(41),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(41),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(41) { animation-delay: 400ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(42),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(42),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(42),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(42) { animation-delay: 410ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(43),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(43),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(43),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(43) { animation-delay: 420ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(44),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(44),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(44),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(44) { animation-delay: 430ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(45),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(45),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(45),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(45) { animation-delay: 440ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(46),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(46),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(46),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(46) { animation-delay: 450ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(47),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(47),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(47),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(47) { animation-delay: 460ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(48),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(48),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(48),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(48) { animation-delay: 470ms; }

  @keyframes menuitem-reveal-down {
    0% {
      opacity: 0;
      transform: translateY(-16px) scaleY(0.95);
    }
    60% {
      opacity: 1;
      transform: translateY(4px) scaleY(1.03);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scaleY(1);
    }
  }
}

/* --- Custom Menu Icon (toggleable) --- */
@media (-moz-bool-pref: "zen-menu-reveal-custom-icon.enable-custom-icon") {
  /* Use custom icon URL if set, otherwise fallback to default SVG */
  toolbarbutton#PanelUI-menu-button {
    list-style-image: url('data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 11 3.09V3a2 2 0 1 1 4 0v.09c.38.14.73.36 1 .66.27.3.49.65.66 1.05h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09c.14.38.36.73.66 1 .3.27.65.49 1.05.66v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>') !important;
  }
  @media (-moz-bool-pref: "zen-menu-reveal-custom-icon.custom-icon-url") {
    toolbarbutton#PanelUI-menu-button {
      list-style-image: url("chrome://userchrome/content/custom-icon.png") !important;
    }
  }
  toolbarbutton#PanelUI-menu-button .toolbarbutton-icon {
    width: 16px !important;
    height: 16px !important;
    min-width: 16px !important;
    min-height: 16px !important;
    max-width: 16px !important;
    max-height: 16px !important;
    scale: 1 !important;
  }
  /* Animation on hover based on preference */
  html[zen-single-toolbar="true"] #PanelUI-menu-button:hover .toolbarbutton-icon {
    animation: spin-once 1s cubic-bezier(0.35, 0.15, 0.12, 1) forwards;
  }
  @media (-moz-bool-pref: "zen-menu-reveal-custom-icon.hover-animation-type=bounce") {
    html[zen-single-toolbar="true"] #PanelUI-menu-button:hover .toolbarbutton-icon {
      animation: bounce-once 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
    }
  }
  @media (-moz-bool-pref: "zen-menu-reveal-custom-icon.hover-animation-type=pulse") {
    html[zen-single-toolbar="true"] #PanelUI-menu-button:hover .toolbarbutton-icon {
      animation: pulse-once 0.7s cubic-bezier(0.4, 0, 0.6, 1) forwards;
    }
  }
  @media (-moz-bool-pref: "zen-menu-reveal-custom-icon.hover-animation-type=none") {
    html[zen-single-toolbar="true"] #PanelUI-menu-button:hover .toolbarbutton-icon {
      animation: none !important;
    }
  }
  @keyframes spin-once {
    to { transform: rotate(180deg); }
  }
  @keyframes bounce-once {
    0% { transform: translateY(0); }
    30% { transform: translateY(-10px); }
    50% { transform: translateY(0); }
    70% { transform: translateY(-5px); }
    100% { transform: translateY(0); }
  }
  @keyframes pulse-once {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
}

} 