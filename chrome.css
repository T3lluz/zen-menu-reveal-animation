@-moz-document url-prefix("chrome:") {

/* --- Staggered Menu Reveal Animation (toggleable) --- */
@media (-moz-bool-pref: "zen-menu-reveal-custom-icon.enable-animation") {
  #appMenu-popup:not([panelopen]) .subviewbutton,
  #PanelUI-popup:not([panelopen]) .subviewbutton,
  #appMenu-popup:not([panelopen]) .panel-menuitem,
  #PanelUI-popup:not([panelopen]) .panel-menuitem {
    opacity: 0 !important;
    pointer-events: none !important;
  }
  #appMenu-popup[panelopen] .subviewbutton,
  #PanelUI-popup[panelopen] .subviewbutton,
  #appMenu-popup[panelopen] .panel-menuitem,
  #PanelUI-popup[panelopen] .panel-menuitem {
    animation: menuitem-reveal-down 0.15s both;
    pointer-events: auto !important;
  }
  /* Staggered delays for 48 items, 10ms per item */
  #appMenu-popup[panelopen] .subviewbutton:nth-child(1),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(1),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(1),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(1) { animation-delay: 0ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(2),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(2),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(2),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(2) { animation-delay: 10ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(3),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(3),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(3),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(3) { animation-delay: 20ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(4),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(4),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(4),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(4) { animation-delay: 30ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(5),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(5),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(5),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(5) { animation-delay: 40ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(6),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(6),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(6),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(6) { animation-delay: 50ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(7),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(7),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(7),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(7) { animation-delay: 60ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(8),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(8),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(8),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(8) { animation-delay: 70ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(9),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(9),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(9),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(9) { animation-delay: 80ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(10),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(10),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(10),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(10) { animation-delay: 90ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(11),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(11),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(11),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(11) { animation-delay: 100ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(12),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(12),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(12),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(12) { animation-delay: 110ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(13),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(13),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(13),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(13) { animation-delay: 120ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(14),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(14),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(14),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(14) { animation-delay: 130ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(15),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(15),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(15),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(15) { animation-delay: 140ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(16),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(16),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(16),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(16) { animation-delay: 150ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(17),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(17),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(17),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(17) { animation-delay: 160ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(18),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(18),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(18),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(18) { animation-delay: 170ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(19),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(19),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(19),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(19) { animation-delay: 180ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(20),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(20),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(20),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(20) { animation-delay: 190ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(21),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(21),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(21),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(21) { animation-delay: 200ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(22),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(22),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(22),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(22) { animation-delay: 210ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(23),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(23),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(23),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(23) { animation-delay: 220ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(24),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(24),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(24),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(24) { animation-delay: 230ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(25),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(25),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(25),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(25) { animation-delay: 240ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(26),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(26),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(26),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(26) { animation-delay: 250ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(27),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(27),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(27),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(27) { animation-delay: 260ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(28),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(28),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(28),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(28) { animation-delay: 270ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(29),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(29),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(29),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(29) { animation-delay: 280ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(30),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(30),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(30),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(30) { animation-delay: 290ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(31),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(31),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(31),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(31) { animation-delay: 300ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(32),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(32),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(32),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(32) { animation-delay: 310ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(33),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(33),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(33),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(33) { animation-delay: 320ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(34),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(34),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(34),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(34) { animation-delay: 330ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(35),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(35),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(35),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(35) { animation-delay: 340ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(36),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(36),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(36),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(36) { animation-delay: 350ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(37),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(37),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(37),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(37) { animation-delay: 360ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(38),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(38),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(38),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(38) { animation-delay: 370ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(39),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(39),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(39),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(39) { animation-delay: 380ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(40),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(40),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(40),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(40) { animation-delay: 390ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(41),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(41),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(41),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(41) { animation-delay: 400ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(42),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(42),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(42),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(42) { animation-delay: 410ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(43),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(43),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(43),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(43) { animation-delay: 420ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(44),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(44),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(44),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(44) { animation-delay: 430ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(45),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(45),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(45),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(45) { animation-delay: 440ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(46),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(46),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(46),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(46) { animation-delay: 450ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(47),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(47),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(47),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(47) { animation-delay: 460ms; }
  #appMenu-popup[panelopen] .subviewbutton:nth-child(48),
  #PanelUI-popup[panelopen] .subviewbutton:nth-child(48),
  #appMenu-popup[panelopen] .panel-menuitem:nth-child(48),
  #PanelUI-popup[panelopen] .panel-menuitem:nth-child(48) { animation-delay: 470ms; }

  @keyframes menuitem-reveal-down {
    0% {
      opacity: 0;
      transform: translateY(-16px) scaleY(0.95);
    }
    60% {
      opacity: 1;
      transform: translateY(4px) scaleY(1.03);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scaleY(1);
    }
  }
}

/* --- Custom Menu Icon (toggleable) --- */
@media (-moz-bool-pref: "zen-menu-reveal-custom-icon.enable-custom-cog") {
  toolbarbutton#PanelUI-menu-button {
    list-style-image: url('data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M7.71297 5.1753C8.68625 5.62451 9.84239 5.1775 10.2547 4.18801C10.901 2.63687 13.0984 2.63687 13.7447 4.18801C14.157 5.1775 15.3132 5.62451 16.2864 5.1753C17.8968 4.43205 19.5676 6.10283 18.8243 7.71321C18.3751 8.68649 18.8221 9.84263 19.8116 10.2549C21.3628 10.9012 21.3628 13.0987 19.8116 13.745C18.8221 14.1573 18.3751 15.3134 18.8243 16.2867C19.5676 17.8971 17.8968 19.5678 16.2864 18.8246C15.3132 18.3754 14.157 18.8224 13.7447 19.8119C13.0984 21.363 10.901 21.363 10.2547 19.8119C9.84239 18.8224 8.68625 18.3754 7.71297 18.8246C6.10259 19.5678 4.4318 17.8971 5.17505 16.2867C5.62426 15.3134 5.17725 14.1573 4.18776 13.745C2.63663 13.0987 2.63663 10.9012 4.18776 10.2549C5.17725 9.84263 5.62426 8.68649 5.17505 7.71321C4.4318 6.10283 6.10259 4.43205 7.71297 5.1753ZM11.9997 8.74994C10.2048 8.74994 8.7497 10.205 8.7497 11.9999C8.7497 13.7949 10.2048 15.2499 11.9997 15.2499C13.7946 15.2499 15.2497 13.7949 15.2497 11.9999C15.2497 10.205 13.7946 8.74994 11.9997 8.74994Z" fill="#323232"/><path d="M10.255 4.18806C9.84269 5.17755 8.68655 5.62456 7.71327 5.17535C6.10289 4.4321 4.4321 6.10289 5.17535 7.71327C5.62456 8.68655 5.17755 9.84269 4.18806 10.255C2.63693 10.9013 2.63693 13.0987 4.18806 13.745C5.17755 14.1573 5.62456 15.3135 5.17535 16.2867C4.4321 17.8971 6.10289 19.5679 7.71327 18.8246C8.68655 18.3754 9.84269 18.8224 10.255 19.8119C10.9013 21.3631 13.0987 21.3631 13.745 19.8119C14.1573 18.8224 15.3135 18.3754 16.2867 18.8246C17.8971 19.5679 19.5679 17.8971 18.8246 16.2867C18.3754 15.3135 18.8224 14.1573 19.8119 13.745C21.3631 13.0987 21.3631 10.9013 19.8119 10.255C18.8224 9.84269 18.3754 8.68655 18.8246 7.71327C19.5679 6.10289 17.8971 4.4321 16.2867 5.17535C15.3135 5.62456 14.1573 5.17755 13.745 4.18806C13.0987 2.63693 10.9013 2.63693 10.255 4.18806Z" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" stroke="#323232" stroke-width="2"/></svg>');
  }
  toolbarbutton#PanelUI-menu-button .toolbarbutton-icon {
    width: 16px !important;
    height: 16px !important;
    min-width: 16px !important;
    min-height: 16px !important;
    max-width: 16px !important;
    max-height: 16px !important;
    scale: 1 !important;
    transition: transform 0.7s cubic-bezier(0.35, 0.15, 0.12, 1);
  }
  html[zen-single-toolbar="true"] #PanelUI-menu-button:hover .toolbarbutton-icon {
    transform: rotate(180deg);
  }
}

@media not all and (-moz-bool-pref: "zen-menu-reveal-custom-icon.enable-custom-cog") {
  toolbarbutton#PanelUI-menu-button {
    list-style-image: url("chrome://global/skin/icons/settings.svg") !important;
  }
  toolbarbutton#PanelUI-menu-button .toolbarbutton-icon {
    transform: none !important;
  }
}

} 